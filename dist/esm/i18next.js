import{__awaiter as t,__generator as o,__assign as i}from"./_virtual/_tslib.js";var n=function(i,n){return t(void 0,void 0,void 0,(function(){var t=this;return o(this,(function(o){return[2,Promise.all(i.map((function(o){var i=o.call(t,n);return i||Promise.resolve(i)})))]}))}))},e=function(){function e(t){void 0===t&&(t={}),this.options=t,this.isInitialized=!1,this.extendOptionsHooks=[],this.loadResourcesHooks=[],this.resources={}}return e.prototype.throwIfAlreadyStarted=function(t){if(this.isInitialized)throw new Error(t)},e.prototype.throwBecauseOfHookIfAlreadyStarted=function(t){this.throwIfAlreadyStarted('Cannot call "addHook('+t+')" when fastify instance is already started!')},e.prototype.addHook=function(t,o){return this.throwBecauseOfHookIfAlreadyStarted(t),"extendOptions"===t&&this.extendOptionsHooks.push(o),"loadResources"===t&&this.loadResourcesHooks.push(o),this},e.prototype.runExtendOptionsHooks=function(){return t(this,void 0,void 0,(function(){var t=this;return o(this,(function(o){switch(o.label){case 0:return[4,n(this.extendOptionsHooks,[i({},this.options)])];case 1:return o.sent().forEach((function(o){t.options=i(i({},o),t.options)})),[2]}}))}))},e.prototype.runLoadResourcesHooks=function(){return t(this,void 0,void 0,(function(){var t;return o(this,(function(o){switch(o.label){case 0:return t={},[4,n(this.loadResourcesHooks,[])];case 1:return o.sent().forEach((function(o){t=i(i({},t),o)})),[2,t]}}))}))},e.prototype.init=function(){return t(this,void 0,void 0,(function(){var t;return o(this,(function(o){switch(o.label){case 0:return[4,this.runExtendOptionsHooks()];case 1:return o.sent(),t=this,[4,this.runLoadResourcesHooks()];case 2:return t.resources=o.sent(),this.isInitialized=!0,[2,this]}}))}))},e.prototype.t=function(t,o){if(!this.isInitialized)throw new Error("i18next is not yet initialized!");return this.resources[t]},e}();function r(t){return new e(t)}export default r;
